<!-- profile.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen p-6">

  <div class="bg-gray-800 p-6 rounded-xl shadow-xl w-full max-w-md">
    <h2 class="text-2xl font-bold text-yellow-400 mb-4 text-center">My Profile</h2>
    
    <p><strong>Name:</strong> <span id="userName">Loading...</span></p>
    <p><strong>Email:</strong> <span id="userEmail">Loading...</span></p>
    <p><strong>Coins:</strong> <span id="userCoins">Loading...</span></p>
    <p><strong>UID:</strong> 
      <span id="userUID" class="text-green-400">Loading...</span>
      <button onclick="copyUID()" class="ml-2 text-sm bg-yellow-400 text-black px-2 py-1 rounded">Copy</button>
    </p>

    <button onclick="logout()" class="mt-6 w-full bg-red-500 hover:bg-red-600 py-2 rounded font-bold">Logout</button>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCwiUR6oJRjTBFa2ajTdb-5Owc_I6Dw2S0",
      authDomain: "fir-bot-bd5e8.firebaseapp.com",
      databaseURL: "https://fir-bot-bd5e8-default-rtdb.firebaseio.com",
      projectId: "fir-bot-bd5e8",
      storageBucket: "fir-bot-bd5e8.appspot.com",
      messagingSenderId: "501448994050",
      appId: "1:501448994050:web:fb1c102dcaeb23bf93261b"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    auth.onAuthStateChanged(user => {
      if (!user) {
        window.location.href = "index.html";
        return;
      }

      const uid = user.uid;
      const email = user.email;

      document.getElementById("userUID").innerText = uid;
      document.getElementById("userEmail").innerText = email;

      db.ref("users/" + uid).once("value").then(snapshot => {
        const data = snapshot.val();
        document.getElementById("userName").innerText = data.name || "Player";
        document.getElementById("userCoins").innerText = data.coins || 0;
      });
    });

    function copyUID() {
      const uid = document.getElementById("userUID").innerText;
      navigator.clipboard.writeText(uid).then(() => {
        alert("UID copied to clipboard!");
      });
    }

    function logout() {
      firebase.auth().signOut().then(() => {
        window.location.href = "index.html";
      });
    }
  </script>
</body>
</html>
